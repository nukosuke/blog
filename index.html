<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<link rel="alternate"
      type="application/rss+xml"
      href="/rss.xml"
      title="RSS feed for /">
<title>blog</title>
<meta name="author" content="nukosuke">
<meta name="referrer" content="no-referrer">
<link href= "static/stylesheets/style.css" rel="stylesheet" type="text/css" />
<link rel="icon" href="static/favicon.ico">
</head>
<body>
<div id="preamble" class="status"><div class="header">
  <a href="/">My Static Org Blog</a>
</div>
</div>
<div id="content">
<h1>Welcome to my blog</h1>

<div class="post-date">2021/06/12</div><h1 class="post-title"><a href="/2021-06-12-org-static-blog.html">org-modeでブログを書く</a></h1>

<div id="outline-container-org60b5c4c" class="outline-2">
<h2 id="org60b5c4c"><a href="https://github.com/bastibe/org-static-blog">org-static-blog</a></h2>
<div class="outline-text-2" id="text-org60b5c4c">
<p>
マークダウンでブログを書く際には、たとえば<a href="https://jekyllrb-ja.github.io/">Jekyll</a>や<a href="https://gohugo.io/">Hugo</a>といったStatic Site Generatorが有名だが、org-modeで同様の使い方ができないか調べてみた。
org文書からHTMLを吐き出す機能はorg-modeに組み込まれているものの、ブログのような用途は想定されておらずそのまま使うのは現実的ではない。
<a href="https://orgmode.org/worg/org-blog-wiki.html">https://orgmode.org/worg/org-blog-wiki.html</a> にorg-modeでブログを書くための拡張がリスティングされているので、この中で一番使い勝手がよさそうに感じたorg-static-blogで構築してみる。
</p>
</div>

<div id="outline-container-orgae58798" class="outline-3">
<h3 id="orgae58798">インストール &amp; 設定</h3>
<div class="outline-text-3" id="text-orgae58798">
<p>
init.el に以下のように設定した。
</p>

<div class="org-src-container">
<pre class="src src-elisp">(use-package org-static-blog
  <span style="font-weight: bold;">:hook</span>
  (org-mode . org-static-blog-mode)
  <span style="font-weight: bold;">:custom</span>
  (org-static-blog-publish-title     <span style="font-style: italic;">"nukosuke's blog"</span>)
  (org-static-blog-publish-url       <span style="font-style: italic;">"https://nukosuke.github.io/blog/"</span>)
  (org-static-blog-publish-directory <span style="font-style: italic;">"~/blog/dist/"</span>)
  (org-static-blog-posts-directory   <span style="font-style: italic;">"~/blog/posts/"</span>)
  (org-static-blog-drafts-directory  <span style="font-style: italic;">"~/blog/drafts/"</span>)
  (org-static-blog-enable-tags       t)
  (org-export-with-toc               nil)
  (org-export-with-section-numbers   nil))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org63218fc" class="outline-2">
<h2 id="org63218fc">GitHub Pagesへのデプロイ</h2>
<div class="outline-text-2" id="text-org63218fc">
<div class="org-src-container">
<pre class="src src-yaml"># .github/workflows/publish.yml
name: Publish

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: purcell/setup-emacs@master
	with:
	  version: 27.1
      - uses: actions/checkout@v2
      - name: Retrieve org-static-blog.el
	run: curl -O https://raw.githubusercontent.com/bastibe/org-static-blog/1.5.0/org-static-blog.el
      - name: Build
	run: emacs -Q --batch -l org-static-blog.el -l config.el -f org-static-blog-publish
      - name: Deploy
	if: github.ref == 'refs/heads/main'
	uses: peaceiris/actions-gh-pages@v3
	with:
	  github_token: ${{ secrets.GITHUB_TOKEN }}
	  publish_dir: ./dist
</pre>
</div>
</div>
</div>
<div class="taglist"><a href="/tags.html">タグ</a>: <a href="/tag-emacs.html">emacs</a> <a href="/tag-blog.html">blog</a> <a href="/tag-org-mode.html">org-mode</a> </div><div id="archive">
<a href="/archive.html">他の投稿</a>
</div>
</div>
<div id="postamble" class="status"><div id="archive">
  <a href="/archive.html">Other posts</a>
</div>
<div align="center">
  <a rel="license" href="https://creativecommons.org/licenses/by-sa/3.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/88x31.png" />
  </a>
</div>
</div>
</body>
</html>
